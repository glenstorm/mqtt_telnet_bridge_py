Бридж MQTT-Telnet (TCP)

Нужно реализовать сервис, который будет выступать в качестве моста между MQTT и telnet-клиентом, с которым можно будет общаться текстом.

Клиентов может подключиться несколько (до 1000). С каждым из клиентов будет поддерживаться отдельная сессия. Во время сессии клиент может подписаться на сообщения (командой subscribe <topic>) и начать
слушать сообщения по подписке (командой poll). Команды заканчиваются символом перевода строки. После ввода команды poll сервер должен начать выводить сообщения формата topic: value. После команды poll
сервер больше не реагирует на команды клиента (для упрощения).

Пример сессии:

  1. Сервер запущен, подключился к брокеру MQTT и слушает входящие telnet-соединения на порту 1234.
  2. Подключился клиент 1, ввёл команду subscribe topic1/#. Сервер подписался на сообщения для этих топиков, но входящие сообщения пока игнорирует (не было команды poll).
  3. Подключился клиент 2, ввёл команду subscribe topic1/foo и сразу за ней poll. Сервер подписался на этот топик и отправляет входящие сообщения в консоль второму клиенту.
  4. Клиент 1 ввёл команду poll. Сервер начинает отправлять входящие сообщения первому клиенту.

Можно использовать любые доступные библиотеки, лишь бы работало под linux. С telnet-клиентом можно связываться через сырой TCP (сокеты). Для MQTT рекомендуется использовать библиотеки paho.mqtt,
доступны для C, Python и ещё множества языков. В качестве брокера MQTT можно использовать mosquitto (доступен в Linux), для ручной записи в топики можно использовать утилиты mosquitto_sub и mosquitto_pub.
